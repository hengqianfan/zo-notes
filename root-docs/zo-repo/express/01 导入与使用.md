## å»ºç«‹é¡¹ç›®æ–‡ä»¶å¤¹

<!-- > ä¸€èˆ¬ express æ˜¯åœ¨åç«¯é¡¹ç›®ä¸­ï¼Œä½œä¸ºé¡¹ç›®çš„å¤§æ¡†æ¶çš„ä½¿ç”¨  -->

<br/>

> åˆ›å»ºå¹¶å‘½åï¼šä¸€ä¸ª `server` çš„æ–‡ä»¶å¤¹ä½œä¸ºåç«¯é¡¹ç›®çš„æ ¹ç›®å½•

## åˆå§‹åŒ–é¡¹ç›®

<br/>

> ä½¿ç”¨å‘½ä»¤è¡Œçª—å£è¿›å…¥ server ç›®å½•ä¸‹ï¼Œè¿è¡Œåˆå§‹åŒ–ä»£ç  

::: code-group

```shell [npm]
npm init
```
```shell [pnpm]
pnpm init
```

:::


## å®‰è£…

::: code-group

```shell [npm]
npm i express -D
```
```shell [pnpm]
pnpm i express -D
```

:::

## ä½¿ç”¨

```js
// å¯¼å…¥åŒ…
const express = require('express')
// å®ä¾‹åŒ–
const app = express()
// å®šä¹‰ç«¯å£å·
const port = 8080

// åˆ›å»ºè·¯ç”±
app.get('/home', (req, res) => {
    res.end('å·²æ¥å—')
})
// ç›‘å¬ï¼ˆå¯åŠ¨æœåŠ¡ï¼‰
app.listen(port, () => {
    console.log(`æœåŠ¡å·²ç»å¯åŠ¨.....http://127.0.0.1:${port}`);
})
```

## å“åº”

```js
app.get('/home',(req,res)=>{
    // é‡å®šå‘
    res.redirect('https://baidu.com')
    // ä¸‹è½½
    res.download('æ–‡ä»¶çš„è·¯å¾„')
    // å­—ç¬¦ä¸²
    res.json({
        name:'mo',
        age:18
    })
    // æ–‡ä»¶å†…å®¹
    res.sendFile('æ–‡ä»¶çš„è·¯å¾„')
})

```

## ä¸­é—´ä»¶

- æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°

### å…¨å±€ä¸­é—´ä»¶

## 2. å¿«é€Ÿåˆ›å»º express é¡¹ç›®

> ç›¸å…³ç½‘å€

https://www.expressjs.com.cn/starter/generator.html


### 2.1 åˆ©ç”¨å·¥å…·åŒ…ç”Ÿæˆé¡¹ç›®

- **ä»¥ä¸‹ä»£ç å«æ³¨é‡Šï¼Œè¯·è‡ªè¡Œé€‰æ‹©å¤åˆ¶èŒƒå›´** ğŸ‘‡

::: code-group


```shell [Node.js 8.2.0 ä»¥ä¸Š]
#   åŸºæœ¬ä½¿ç”¨
npx express-generator


```

```shell [Node.js 8.2.0 ä»¥ä¸‹]
# 1. å…¨å±€å®‰è£… express-generator åŒ…
npm install -g express-generator
# 2. åˆ›å»ºé¡¹ç›®
express [yourProjectName]
# ç¤ºä¾‹ä»£ç  ğŸ‘‡
express --no-view myserver
# è¡¨ç¤ºï¼šåˆ›å»ºä¸€ä¸ªåä¸º myserver ä¸” æ— éœ€è§†å›¾ çš„ express é¡¹ç›®

```


```shell [ç›¸å…³å‚æ•°]
# è·å–å¸®åŠ©
$ express -h
# ç”¨æ³•é€»è¾‘ ğŸ‘‡
  Usage: express [options] [dir]
# ç¤ºä¾‹ï¼šexpress --no-view myserver
# è¡¨ç¤ºï¼šåˆ›å»ºä¸€ä¸ªåä¸º myserver ä¸” æ— éœ€è§†å›¾ çš„ express é¡¹ç›®

  Options:

    -h, --help          è¾“å‡ºä½¿ç”¨æ–¹æ³•
        --version       è¾“å‡ºç‰ˆæœ¬å·
    -e, --ejs           æ·»åŠ å¯¹ ejs æ¨¡æ¿å¼•æ“çš„æ”¯æŒ
        --hbs           æ·»åŠ å¯¹ handlebars æ¨¡æ¿å¼•æ“çš„æ”¯æŒ
        --pug           æ·»åŠ å¯¹ pug æ¨¡æ¿å¼•æ“çš„æ”¯æŒ
    -H, --hogan         æ·»åŠ å¯¹ hogan.js æ¨¡æ¿å¼•æ“çš„æ”¯æŒ
        --no-view       åˆ›å»ºä¸å¸¦è§†å›¾å¼•æ“çš„é¡¹ç›®
    -v, --view <engine> æ·»åŠ å¯¹è§†å›¾å¼•æ“ï¼ˆviewï¼‰ <engine> çš„æ”¯æŒ (ejs|hbs|hjs|jade|pug|twig|vash) ï¼ˆé»˜è®¤æ˜¯ jade æ¨¡æ¿å¼•æ“ï¼‰
    -c, --css <engine>  æ·»åŠ æ ·å¼è¡¨å¼•æ“ <engine> çš„æ”¯æŒ (less|stylus|compass|sass) ï¼ˆé»˜è®¤æ˜¯æ™®é€šçš„ css æ–‡ä»¶ï¼‰
        --git           æ·»åŠ  .gitignore
    -f, --force         å¼ºåˆ¶åœ¨éç©ºç›®å½•ä¸‹åˆ›å»º

```

:::

### 2.2 å®‰è£…é¡¹ç›®ä¾èµ–


```shell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd myserver
# å®‰è£…é¡¹ç›®ä¾èµ–
npm install
```

### 2.3 é¡¹ç›®çš„ç›®å½•ç»“æ„

```shell
.
â”œâ”€â”€ app.js
â”œâ”€â”€ bin
â”‚   â””â”€â”€ www
â”œâ”€â”€ package.json
â”œâ”€â”€ public
â”‚   â”œâ”€â”€ images
â”‚   â”œâ”€â”€ javascripts
â”‚   â””â”€â”€ stylesheets
â”‚       â””â”€â”€ style.css
â”œâ”€â”€ routes
â”‚   â”œâ”€â”€ index.js
â”‚   â””â”€â”€ users.js
â””â”€â”€ views
    â”œâ”€â”€ error.pug
    â”œâ”€â”€ index.pug
    â””â”€â”€ layout.pug

```

<hr/>

### 2.4 é¡¹ç›®çš„å¯åŠ¨

- **ä½¿ç”¨ `npm start` å‘½ä»¤å¯åŠ¨é¡¹ç›®**

```shell
npm start
```

::: tip æç¤ºï¼šå»ºè®®å®‰è£…  `nodemon` â­


> **è¿™æ˜¯ä¸€ä¸ªå¯ä»¥è®©nodeé¡¹ç›®çƒ­æ›´æ–°çš„åŒ…**  
> å³æ˜¯è¯´ :  å¯ä»¥ä¸ç”¨é¢‘ç¹å¯åŠ¨é¡¹ç›®

- å…¨å±€å®‰è£…

```shell
npm i -g nodemon
```

- ç„¶åï¼Œä¿®æ”¹é¡¹ç›®çš„å‘½ä»¤è„šæœ¬

> åœ¨ `package.json` æ–‡ä»¶ä¸­

> å°† `node ./bin/www` -> `nodemon ./bin/www`



```json:line-numbers{6}
{
  "name": "myserver",
  "version": "0.0.0",
  "private": true,
  "scripts": {
    "start": "node./bin/www"  ,  // [!code --]
    "start": "nodemon ./bin/www"   // [!code ++]

  },
  "dependencies": {
    "cookie-parser": "~1.4.4",
    "debug": "~2.6.9",
    "express": "~4.16.1",
    "morgan": "~1.9.1"
  }
}
```



:::
